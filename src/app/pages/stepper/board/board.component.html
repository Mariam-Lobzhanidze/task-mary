<button
  class="add-board"
  mat-raised-button
  color="primary"
  (click)="toggleForm()"
>
  Add Board
</button>
<ng-container class="form-container" *ngIf="createBoard">
  <form [formGroup]="boardFormGroup">
    <p *ngIf="update" class="text-purple-800">Update Board</p>

    <div class="wrapper">
      <mat-form-field appearance="outline">
        <mat-label>Name</mat-label>
        <input type="text" matInput placeholder="name" formControlName="name" />
        <mat-icon matSuffix>{{
          boardFormGroup.get("name").invalid &&
          boardFormGroup.get("name").touched
            ? "mood_bad"
            : "sentiment_very_satisfied"
        }}</mat-icon>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>description</mat-label>
        <input
          type="text"
          matInput
          placeholder="Description"
          formControlName="description"
        />
        <mat-icon matSuffix>{{
          boardFormGroup.get("description").invalid &&
          boardFormGroup.get("description").touched
            ? "mood_bad"
            : "sentiment_very_satisfied"
        }}</mat-icon>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Position</mat-label>
        <input
          type="number"
          matInput
          placeholder="position"
          formControlName="position"
        />
        <mat-icon matSuffix>{{
          boardFormGroup.get("position").invalid &&
          boardFormGroup.get("position").touched
            ? "mood_bad"
            : "sentiment_very_satisfied"
        }}</mat-icon>
      </mat-form-field>
    </div>

    <!------------------------- Table tailwind------------------------------->

    <div
      class="relative overflow-x-auto shadow-md sm:rounded-lg bg-violet-50 shadow-md rounded px-8 pt-6 pb-8"
    >
      <table
        formArrayName="columns"
        class="w-full text-sm text-left bg-violet-50 dark:text-grey-400"
      >
        <thead class="text-xs text-white-700 uppercase bg-violet-900">
          <tr>
            <th
              scope="col"
              class="px-6 py-3 text-white Class Properties text-left text-align: left;"
            >
              Name
            </th>
            <th
              scope="col"
              class="px-6 py-3 text-white Class Properties text-left text-align: left;"
            >
              Description
            </th>
            <th
              scope="col"
              class="px-6 py-3 text-white Class Properties text-left text-align: left;"
            >
              Position
            </th>

            <th
              scope="col"
              class="px-6 py-3 text-white Class Properties text-left text-align: left;"
            >
              Task Status
            </th>
            <th
              scope="col"
              class="px-6 py-3 text-white Class Properties text-left text-align: left; text-center"
            >
              Actions
            </th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="
              let column of boardFormGroup.get('columns')['controls'];
              let i = index
            "
            [formGroupName]="i"
            class="bg-violet-50 dark:bg-gray-100"
          >
            <td>
              <mat-form-field class="sized" appearance="outline">
                <input
                  id="default-input"
                  type="text"
                  matInput
                  class="form-control"
                  placeholder="name"
                  formControlName="name"
                />

                <mat-icon matSuffix>{{
                  boardFormGroup.get("columns").invalid &&
                  boardFormGroup.get("columns").touched
                    ? "mood_bad"
                    : "sentiment_very_satisfied"
                }}</mat-icon>
              </mat-form-field>
            </td>
            <td>
              <mat-form-field class="sized" appearance="outline">
                <input
                  matInput
                  type="text"
                  class="form-control"
                  placeholder="description"
                  formControlName="description"
                />
                <mat-icon matSuffix>{{
                  boardFormGroup.get("columns").invalid &&
                  boardFormGroup.get("columns").touched
                    ? "mood_bad"
                    : "sentiment_very_satisfied"
                }}</mat-icon>
              </mat-form-field>
            </td>
            <td>
              <mat-form-field class="sized" appearance="outline">
                <input
                  type="number"
                  matInput
                  class="form-control"
                  placeholder="position"
                  formControlName="position"
                />
                <mat-icon matSuffix>{{
                  boardFormGroup.get("columns").invalid &&
                  boardFormGroup.get("columns").touched
                    ? "mood_bad"
                    : "sentiment_very_satisfied"
                }}</mat-icon>
              </mat-form-field>
            </td>

            <td>
              <mat-form-field class="sized" appearance="outline">
                <mat-select class="form-control" formControlName="taskStatus">
                  <mat-option *ngFor="let task of taskEnum" [value]="task">
                    {{ task }}
                  </mat-option>
                </mat-select>
                <mat-icon matSuffix>{{
                  boardFormGroup.get("columns").invalid &&
                  boardFormGroup.get("columns").touched
                    ? "mood_bad"
                    : "sentiment_very_satisfied"
                }}</mat-icon>
              </mat-form-field>
            </td>

            <td class="btn-up">
              <div mat-dialog-actions>
                <button
                  (click)="deleteInputsRow(i)"
                  mat-raised-button
                  class="warn-button"
                  type="button"
                >
                  Delete
                </button>
              </div>
            </td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td>
              <button
                class="add"
                type="button"
                mat-raised-button
                class="primary-button"
                (click)="addColumn()"
              >
                Add New column
              </button>
            </td>
          </tr>
        </tfoot>
      </table>
    </div>

    <!------------------------- Table------------------------------->
  </form>
</ng-container>
<div class="container">
  <div>
    <button
      class="board-save"
      [disabled]="boardFormGroup.invalid"
      mat-raised-button
      color="basic"
      (click)="saveBoard()"
    >
      Save
    </button>
    <button
      [disabled]="!goNextStep"
      class="next"
      mat-raised-button
      color="primary"
      (click)="submit()"
    >
      Next
    </button>
    <mat-progress-bar *ngIf="active" mode="indeterminate"></mat-progress-bar>
  </div>

  <div class="scroll">
    <mat-label class="label">My Boards</mat-label>
    <mat-list class="example-list-wrapping">
      <mat-list-item *ngFor="let board of myBoards.slice().reverse()" lines="3">
        <span matListItemTitle>{{ board.name | titlecase }}</span>
      </mat-list-item>
    </mat-list>
  </div>
</div>
